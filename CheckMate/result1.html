<p>


<script src="https://www.gstatic.com/firebasejs/3.4.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBPiin7LfUpf03CU_uPpRwgkYmaQrwB5cY",
    authDomain: "dream-car-ac5a2.firebaseapp.com",
    databaseURL: "https://dream-car-ac5a2.firebaseio.com",
    storageBucket: "dream-car-ac5a2.appspot.com",
    messagingSenderId: "1022872064485"
  };
  firebase.initializeApp(config);
</script>
    
</p>
<p>
<script>	
var pricel= parseInt(localStorage.getItem("pricel"))/1000;
var priceh=parseInt(localStorage.getItem("priceh"))/1000;
var antibs=localStorage.getItem("antibs");
var airbag=localStorage.getItem("airbag");
var efficiency=localStorage.getItem("efficiency");
var bodytype=localStorage.getItem("bodytype");
var fuel=localStorage.getItem("fuel");
var image=localStorage.getItem("image");
var namearr=[];
namearr.length = 0;
var imagearr=[];
imagearr.length = 0;
var pricearr=[];
pricearr.length = 0;
var absarr=[];
absarr.length = 0;
var airbagarr=[];
airbagarr.length = 0;
var btypearr=[];
btypearr.length = 0;
var fuelarr=[];
fuelarr.length = 0;
var seatsarr=[];
seatsarr.length = 0;
var efficiencyarr=[];
efficiencyarr.length = 0;
var I=0;
var j=0;
var k=0;
var ref = firebase.database().ref("cars-data");
ref.orderByKey().endAt("293").on("child_added", function(snapshot) {
//var declare
   var NAME = snapshot.child("Car Name").val();
   var PRICE = snapshot.child("Price").val();
   var ANTIBS = snapshot.child("ABS").val();
   var AIRBAG = snapshot.child("Airbags(passenger-dual)").val();
   var SEATS = snapshot.child("No of seats").val();
   var FUEL = snapshot.child("Fuel(petrol-diesel)").val();
   var EFFICIENCY = snapshot.child("Mileage").val();
   var BODYTYPE = snapshot.child("Body Type").val();
   var IMAGE = snapshot.child("Image").val();
	
   k=k+1;

if(parseInt(PRICE) > pricel && parseInt(PRICE) < priceh)
{
if((ANTIBS.toLowerCase().search(antibs.toLowerCase())!=-1)||antibs.toLowerCase() == "na")
	{
		if((AIRBAG.toLowerCase().search(airbag.toLowerCase())!=-1)||airbag.toLowerCase() == "na")
		{
			
				if((FUEL.toLowerCase().search(fuel.toLowerCase())!=-1)||fuel.toLowerCase() == "na")
				{
					if((BODYTYPE.toLowerCase().search(bodytype.toLowerCase())!=-1)||bodytype.toLowerCase() == "na")
					{
						if(parseInt(EFFICIENCY) >= parseInt(efficiency)||efficiency=="0")
						{
						        namearr.push(NAME);
							var find = '-257';
							var re = new RegExp(find, 'g');

							IMAGE = IMAGE.replace(re, '/');
							imagearr.push(IMAGE);
							pricearr.push(PRICE);
							absarr.push(ANTIBS);
							airbagarr.push(AIRBAG);
							btypearr.push(BODYTYPE);
							fuelarr.push(FUEL);
							seatsarr.push(SEATS);
							efficiencyarr.push(EFFICIENCY);
                                			localStorage["namearr"] = JSON.stringify(namearr);
							localStorage["imagearr"] = JSON.stringify(imagearr);
							localStorage["pricearr"] = JSON.stringify(pricearr);
							localStorage["absarr"] = JSON.stringify(absarr);
							localStorage["airbagarr"] = JSON.stringify(airbagarr);
							localStorage["btypearr"] = JSON.stringify(btypearr);
							localStorage["fuelarr"] = JSON.stringify(fuelarr);
							localStorage["seatsarr"] = JSON.stringify(seatsarr);
							localStorage["efficiencyarr"] = JSON.stringify(efficiencyarr);
							
							
						}
					}
				}
			
		}
	}
}

if(k==293)
{
	if(!namearr.length)
	{
		alert("No results found. Please try again by modifying the search parameters");
		window.location="CheckmatePagemod5.html#fragment-1";
	}
	else
	{
		window.location="result2.html";
	}	
}   
});

</script>
</p>

<html>
<title>Loading....</title>
<body background="loading.jpeg">
</body>
</html>
